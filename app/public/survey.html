<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Survey</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css">

</head>
<style>
  body {
    background-image: url("https://image.freepik.com/free-vector/colorful-gradient-background_1159-7460.jpg");
    background-position: 0% 40%;
    background-repeat: no-repeat;
    background-size: cover;
  }
</style>

<body>
  <div class="container">
    <div class="jumbotron" id="jumbo-home" style="background-color: rgb(112, 11, 112);">
      <h1 style="color: mistyrose;">Survey Questions</h1>

      <hr>

    </div>
    <div class="row">

      <div class="col-12">

        <div class="card">
          <div class="card-header" style="background-color: rgb(206, 71, 156);">
            <h2><strong>About you!</strong></h2>
            <div class="form-group">
              <label for="name">Name (Requried)</label>
              <input type="text" class="form-control" id="name" placeholder="John Doe">
            </div>

            <div class="form-group">
              <label for="role">Link To Photo Image (Required)</label>
              <input type="text" class="form-control" id="photo">
            </div>
            <div class="card-body">
              <h2><strong>Question 1</strong></h2>
              <h6>You love to explore, take adventures that pop up in your mind.</h6>
              <div class="form-group">
                <label for="exampleFormControlSelect1">Select an Option:</label>
                <select class="form-control" id="q1" style="width: 195px;">
                  <option value="1">1 (Strongly Disagree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3><strong>Question 2</strong></h3>
                <h6>Generally speaking, you reply more on your experience than your imagination.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q2" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <h3><strong>Question 3</strong></h3>
                <h6>You think online dating apps is an effective way to meet people.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q3" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <h3><strong>Question 4</strong></h3>
                <h6>Dating apps is a good way to seek romance.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q4" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <h3><strong>Question 5</strong></h3>
                <h6>It's easier to have a conversation online to get to know one another.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q5" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <h3><strong>Question 6</strong></h3>
                <h6>Being outdoors has a great impact on my lifestyle.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q6" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <h3><strong>Question 7</strong></h3>
                <h6>Finding someone compatible means being upfront about your opinions and your end goals.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q7" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <h3><strong>Question 8</strong></h3>
                <h6>Do you ever feel yourself needing to change (even just downplay) things about yourself?.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q8" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <h3><strong>Question 9</strong></h3>
                <h6>Making memories builds a strong relationship.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q9" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <h3><strong>Question 10</strong></h3>
                <h6>In a discussion, truth should be more important than people's sensitivities.</h6>
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select an Option:</label>
                  <select class="form-control" id="q10" style="width: 195px;">
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <button type="button" id="submit" class="btn btn-lg btn-block">Submit</button>
              </div>
            </div>

          </div>

        </div>
      </div>

    </div>
    <!-- Modal after survey completion -->
    <div id="bestFriendModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h3 class="modal-title">Your New Best Friend</h1>
          </div>
          <div class="modal-body">
            <h2 id="bestFriend"></h2>
            <img id="bestFriendPhoto" src="#">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <footer class="footer">
    <div class="container">
      <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/skip1113/friend-finder">GitHub Repo</a>
    </div>
  </footer>


  <script type="text/javascript">
    $(document).ready(function () {
      
      $("#submit").on("click", function (event) {
        event.preventDefault();
        var valid = true;

        if ($("#name").val() === "" || $("#photo").val() === "") {
          valid = false;
        } else if ($("#q1").val() === "empty" || $("#q2").val() === "empty" || $("#q3").val() === "empty" || $("#q4").val() === "empty" || $("#q5").val() === "empty" || $("#q6").val() === "empty" || $("#q7").val() === "empty" || $("#q8").val() === "empty" || $("#q9").val() === "empty" || $("#q10").val() === "empty") {
          valid = false;
        }

        if (valid === true) {
          var newUser = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: [
              $("#q1").val(),
              $("#q2").val(),
              $("#q3").val(),
              $("#q4").val(),
              $("#q5").val(),
              $("#q6").val(),
              $("#q7").val(),
              $("#q8").val(),
              $("#q9").val(),
              $("#q10").val()
            ]
          };

          var currentURL = window.location.origin;
          //AJAX post the data to the friends API
          $.post("/api/friends", newUser, function (data) {

            $("#bestFriend").text(data.name);
            $("#bestFriendPhoto").attr("src", data.photo);
            $("#bestFriendModal").modal("toggle");
          });
        } else {
          // If a required field is missing, show alert
          alert("Survey is incomplete!");
        };
        
      });
      
    })

  </script>
</body>

</html>